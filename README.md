# Sanwa Telemetry Graph

サンワ製のプロポで取得できるテレメトリーデータを可視化するWebアプリです。

## 機能

### グラフ表示
- CSVファイルを読み込み、各チャンネルの時系列データをSVGグラフで表示
- 表示するメトリクスを選択可能（ST(%)、TH(%)、RPM、VOLT(V)、TMP1、TMP2）
- ズーム機能で表示範囲を調整可能

### リプレイ再生
- テレメトリーデータをリアルタイムに再生
- ステアリング・スロットル/ブレーキの入力状況をビジュアルバーで表示
- 再生速度の変更、シーク操作に対応
- キーボードショートカット: `←` / `→` で5秒送り、`Shift` 併用で10秒送り

<!-- ### コースマップ
- ステアリング・スロットルデータからコースレイアウトを自動推定
- 再生位置に連動した現在位置マーカー表示
- コースマップの手動編集（ドラッグで制御点を移動）
- コースマップのJSON保存 / 読み込み
- 各種パラメータ（基本速度、ステアゲイン、ガンマ値等）の調整 -->

### 周期性予測
- 操作パターンの周期性を自動検出し、ラップ数・ラップタイムを推定
- 推定結果をグラフの表示範囲に反映可能

### 動画同期再生
- テレメトリーデータと動画を同期して再生
- 同期モード（開始基準 / 終了基準）とオフセット調整

### セッション管理 (.stg)
- CSV・動画・コースマップ・表示設定をまとめて `.stg` ファイルとして保存
- `.stg` ファイルからワンクリックでセッションを復元

## 対応データ形式

サンワのプロポが出力するCSV形式:

```
TOTAL LAP,'00:04:18.07
BEST LAP,'00:04:18.07
AVERAGE LAP,'00:04:18.07
LAP,LAP TIME,REC TIME,ST(%),TH(%),RPM,VOLT(V),TMP1(deg C),TMP2(deg C),
L000,'00:00:00.00,'00:00:00.00, 034, 051,00000,005.04,255.0,255.0
```

| カラム | 説明 |
|---|---|
| `LAP` | ラップ番号 (L000, L001, ...) |
| `LAP TIME` | ラップタイム |
| `REC TIME` | 記録時間 (50ms間隔) |
| `ST(%)` | ステアリング量 (-100〜100) |
| `TH(%)` | スロットル/ブレーキ量 (-100〜100) |
| `RPM` | 回転数 |
| `VOLT(V)` | 電圧 |
| `TMP1(deg C)` | 温度1 |
| `TMP2(deg C)` | 温度2 |

## 使い方

[こちらのURL](https://akiii2024.github.io/sanwa_telemetry_graph/)にアクセスして、CSVファイルを読み込んでください。

## 技術構成

- **React 18** (CDN / UMD)
- **Babel Standalone** (JSXのブラウザ内トランスパイル)
- **JSZip** (.stgファイルのZIP圧縮/展開)
- **SVG** (グラフ・コースマップの描画)
- ビルドツール不要 — 静的ファイルのみで動作
